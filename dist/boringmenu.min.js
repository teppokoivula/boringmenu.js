!function(){"use strict";window.boringmenu=class{addClasses(e,t){const n=window.location.pathname.replace(/\/$/,"")+"/";e.querySelectorAll("."+t.item+'[href="'+n+'"]').forEach((e=>{for(e.classList.add(t.itemActive),e=e.parentNode;e.parentNode;)if("LI"==(e=e.parentNode).tagName){const n=e.firstChild;null!==n&&n.classList.contains(t.item)&&!n.classList.contains(t.itemActive)&&n.classList.add(t.itemParent)}else if(e.matches(this.options.selectors.menu))break}))}findSubMenus(e,t=2){e.querySelectorAll(this.options.selectors.item).forEach((e=>{const n=e.querySelector("ul");n&&(this.menuNum++,n.setAttribute("id",this.options.id+"-"+this.menuNum),n.setAttribute("data-boringmenu-depth",t),e.classList.contains(this.options.classes.itemActive)||e.querySelector("."+this.options.classes.itemActive)||(n.hidden=!0),n.parentNode.insertBefore(this.getToggle(n),n),this.menuObjects.push(n),this.findSubMenus(n,t+1))}))}toggleMenu(e,t,n,o,i,s=!0,l=!1){e.hidden=i,e.menuToggleIcon=e.menuToggleIcon||null,t.setAttribute("aria-expanded",!e.hidden),n.nodeValue=this.options.labels[e.hidden?"menu.open":"menu.close"],null!=o&&(e.menuToggleIcon=this.getToggleIcon(e),o.parentNode.replaceChild(e.menuToggleIcon,o)),l||"accordion"!==this.options.mode||this.menuObjects.forEach((t=>{t.id===e.id||t.hidden||t.contains(e)||!t.menuToggle||this.toggleMenu(t,t.menuToggle,t.menuToggleText,t.menuToggleIcon,!0,!0,!0)})),s&&this.menu.dispatchEvent(new CustomEvent("boringmenu-menu-toggle-done",{bubbles:!0,cancelable:!0,detail:{menu:e,menuDepth:e.getAttribute("data-boringmenu-depth")}}))}getToggle(e){const t=document.createElement("button");t.classList.add(this.options.classes.toggle),t.setAttribute("aria-haspopup","true"),t.setAttribute("aria-expanded",!e.hidden),t.setAttribute("aria-controls",e.getAttribute("id"));const n=document.createElement("span");this.options.classes.toggleTextContainer&&n.classList.add(this.options.classes.toggleTextContainer),t.appendChild(n);const o=document.createTextNode(this.options.labels[e.hidden?"menu.open":"menu.close"]);n.appendChild(o);let i=this.getToggleIcon(e);return null!=i&&t.appendChild(i),e.menuToggle=t,e.menuToggleText=o,e.menuToggleIcon=i,t.addEventListener("click",(t=>{t.stopPropagation(),this.toggleMenu(e,e.menuToggle,e.menuToggleText,e.menuToggleIcon,!e.hidden)})),t.addEventListener("keydown",(t=>{let n;[40,38,13,32].indexOf(t.keyCode)>-1&&(t.preventDefault(),n=40!==t.keyCode&&(38===t.keyCode||!e.hidden),this.toggleMenu(e,e.menuToggle,e.menuToggleText,e.menuToggleIcon,n))})),t}getToggleIcon(e,t){if(t=t||null,this.options.icons["menu.open"]&&this.options.icons["menu.close"])if("string"==typeof(t=this.options.icons[e.hidden?"menu.open":"menu.close"])){const e=t;(t=document.createElement("i")).setAttribute("aria-hidden",!0),e.split(" ").forEach((e=>{t.classList.add(e)}))}else"object"==typeof t&&"function"==typeof t.cloneNode?t=t.cloneNode(!0):"function"==typeof t&&(t=t());return t}mergeOptions(e,t,n=1){null==t&&(t=this.defaultOptions);let o=Object.keys(e);if(!o.length)return t;for(let i=0;i<o.length;i++){const s=o[i];null!==t[s]&&("object"==typeof t[s]?Object.assign(e[s],this.mergeOptions(t[s],e[s],n+1)):1===n&&(t[s]=e[s]))}return Object.assign(e||{},t),e}getID(){return Date.now()}getMenu(){return this.menu}getMenuObjects(){return this.menuObjects}polyfills(){"NodeList"in window&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(let n=0;n<this.length;n++)e.call(t,this[n],n,this)}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");let n=Object(e);for(let e=1;e<arguments.length;e++){let t=arguments[e];if(null!=t)for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}return n},writable:!0,configurable:!0})}constructor(e={}){if(this.defaultOptions={selectors:{menu:".boringmenu",item:":scope > li"},classes:{item:"boringmenu__item",itemActive:"boringmenu__item--active",itemParent:"boringmenu__item--parent",toggle:"boringmenu__toggle",toggleTextContainer:"boringmenu__sr-only"},labels:{"menu.open":"Open","menu.close":"Close"},icons:{"menu.open":"fas fa-plus","menu.close":"fas fa-times"},id:"boringmenu-"+this.getID(),mode:"default"},this.polyfills(),this.options=this.mergeOptions(e),this.menu=document.querySelector(this.options.selectors.menu),this.menu){if(this.menu.setAttribute("data-boringmenu-depth",1),this.menuNum=0,this.menuObjects=[this.menu],this.menu.getAttribute("data-boringmenu"))try{this.options=this.mergeOptions(JSON.parse(this.menu.getAttribute("data-boringmenu"),this.options))}catch(e){}this.addClasses(this.menu,this.options.classes),this.findSubMenus(this.menu),this.menu.dispatchEvent(new CustomEvent("boringmenu-init-done",{bubbles:!0,cancelable:!0}))}else document.dispatchEvent(new CustomEvent("boringmenu-init-done"))}}}();
//# sourceMappingURL=boringmenu.min.js.map
